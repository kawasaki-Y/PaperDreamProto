# Paper Dream - DBè¨­è¨ˆã¨å®Ÿè£…

ä¿®æ­£ãŠç–²ã‚Œæ§˜ã§ã—ãŸã€‚æ¬¡ã«ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

---

## DBè¨­è¨ˆæ–¹é‡

### åŸºæœ¬æ€æƒ³
- **ã‚·ãƒ³ãƒ—ãƒ«ãª2ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆ: Game + Card**
- **ã‚²ãƒ¼ãƒ ã”ã¨ã®å·®ç•°ã¯ attributes (JSON) ã§æŸ”è»Ÿã«å¯¾å¿œ**
- **1ã¤ã®Gameã«è¤‡æ•°ã®CardãŒç´ã¥ã(1:N)**

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Š:
- ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ 
- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ 
- æ‹æ„›ã‚¯ãƒ©ã£ã¨ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ (ä»Šå›ã®è©¦ä½œå“)
- ãã®ä»–ã‚ã‚‰ã‚†ã‚‹ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ 

ã™ã¹ã¦ã‚’åŒã˜DBæ§‹é€ ã§ç®¡ç†ã§ãã¾ã™ã€‚

---

## ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                   Game                       â”ƒ
â”ƒ              (ã‚²ãƒ¼ãƒ æƒ…å ±)                    â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰     â”‚ å‹       â”‚ å¿…é ˆ â”‚ èª¬æ˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id          â”‚ String   â”‚ âœ“   â”‚ UUID    â”‚
â”‚ title          â”‚ String   â”‚ âœ“   â”‚ ã‚²ãƒ¼ãƒ åâ”‚
â”‚ description    â”‚ String?  â”‚      â”‚ èª¬æ˜    â”‚
â”‚ createdAt      â”‚ DateTime â”‚ âœ“   â”‚ ä½œæˆæ—¥æ™‚â”‚
â”‚ updatedAt      â”‚ DateTime â”‚ âœ“   â”‚ æ›´æ–°æ—¥æ™‚â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ 1
                      â”‚
                      â”‚ ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                      â”‚ onDelete: CASCADE
                      â”‚
                      â”‚ N
                      â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                   Card                       â”ƒ
â”ƒ              (ã‚«ãƒ¼ãƒ‰æƒ…å ±)                    â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰     â”‚ å‹       â”‚ å¿…é ˆ â”‚ èª¬æ˜        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id          â”‚ String   â”‚ âœ“   â”‚ UUID        â”‚
â”‚ ğŸ”— gameId      â”‚ String   â”‚ âœ“   â”‚ å¤–éƒ¨ã‚­ãƒ¼    â”‚
â”‚ name           â”‚ String   â”‚ âœ“   â”‚ ã‚«ãƒ¼ãƒ‰å    â”‚
â”‚ imageUrl       â”‚ String   â”‚ âœ“   â”‚ ç”»åƒURL     â”‚
â”‚ width          â”‚ Float?   â”‚      â”‚ å¹…(mm) 63   â”‚
â”‚ height         â”‚ Float?   â”‚      â”‚ é«˜ã•(mm) 88 â”‚
â”‚ order          â”‚ Int      â”‚      â”‚ ä¸¦ã³é † 0    â”‚
â”‚ description    â”‚ String?  â”‚      â”‚ èª¬æ˜        â”‚
â”‚ attributes     â”‚ Json?    â”‚      â”‚ ã‚¿ã‚°(JSON)  â”‚
â”‚ createdAt      â”‚ DateTime â”‚ âœ“   â”‚ ä½œæˆæ—¥æ™‚    â”‚
â”‚ updatedAt      â”‚ DateTime â”‚ âœ“   â”‚ æ›´æ–°æ—¥æ™‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹                                â”‚
â”‚ - gameId (B-tree)                              â”‚
â”‚ - order (B-tree)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”— å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„                                â”‚
â”‚ - gameId â†’ Game.id                             â”‚
â”‚ - å‰Šé™¤æ™‚: CASCADE (è¦ªå‰Šé™¤ã§å­ã‚‚å‰Šé™¤)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## attributes (JSON) ã®è¨­è¨ˆä¾‹

### ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ  (TCG)
```json
{
  "type": "monster",
  "attack": 6,
  "hp": 5,
  "effect": "ç›¸æ‰‹ã®HPã‚’2æ¸›ã‚‰ã™",
  "rarity": "rare"
}
```

### ãƒ‘ãƒ¼ãƒ†ã‚£ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ  (PCG)
```json
{
  "type": "action",
  "category": "penalty",
  "action": "å…¨å“¡1å›ä¼‘ã¿",
  "difficulty": 3,
  "players": "2-6"
}
```

### æ‹æ„›ã‚¯ãƒ©ã£ã¨ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ (ä»Šå›ã®è©¦ä½œå“)

#### ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚«ãƒ¼ãƒ‰
```json
{
  "type": "situation",
  "mood": "romantic",
  "weather": "rain_after",
  "location": "park",
  "emotion_score": 8
}
```

#### ã‚»ãƒªãƒ•ã‚«ãƒ¼ãƒ‰
```json
{
  "type": "words",
  "category": "confession",
  "emotion": "love",
  "intensity": 10,
  "timing": "climax"
}
```

#### ãƒ ãƒ¼ãƒ‰ã‚«ãƒ¼ãƒ‰
```json
{
  "type": "mood",
  "effect": "romantic",
  "season": "spring",
  "visual": "pink",
  "emotion_boost": 2
}
```

---

## Prismaã‚¹ã‚­ãƒ¼ãƒå®Ÿè£…

### ãƒ•ã‚¡ã‚¤ãƒ«: `prisma/schema.prisma`

**ã“ã®è¨­è¨ˆå›³ã®é€šã‚Šã«å®Ÿè£…ã—ã¦ãã ã•ã„:**
```prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Game {
  id          String   @id @default(uuid())
  title       String
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  cards       Card[]
}

model Card {
  id          String   @id @default(uuid())
  gameId      String
  name        String
  imageUrl    String
  width       Float?   @default(63)
  height      Float?   @default(88)
  order       Int      @default(0)
  description String?
  attributes  Json?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  game        Game     @relation(fields: [gameId], references: [id], onDelete: Cascade)
  
  @@index([gameId])
  @@index([order])
}
```

**é‡è¦:**
- ã“ã®è¨­è¨ˆå›³ã‚’ä¸€å­—ä¸€å¥ãã®ã¾ã¾å®Ÿè£…ã—ã¦ãã ã•ã„
- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¿½åŠ ãƒ»å‰Šé™¤ã¯è¡Œã‚ãªã„ã§ãã ã•ã„
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚‚è¨­è¨ˆå›³ã®é€šã‚Šã«è¨­å®šã—ã¦ãã ã•ã„

---

## å®Ÿè£…æ‰‹é †

### 1. PostgreSQLæº–å‚™

REPLITã§åˆ©ç”¨å¯èƒ½ãªPostgreSQLã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’é¸æŠ:

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³A: REPLITå†…è”µã®PostgreSQL**
- REPLITã®Secretsæ©Ÿèƒ½ã§ `DATABASE_URL` ã‚’è¨­å®š

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³B: å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹(æ¨å¥¨)**
- Supabase: https://supabase.com (ç„¡æ–™æ ã‚ã‚Š)
- Neon.tech: https://neon.tech (ç„¡æ–™æ ã‚ã‚Š)

### 2. Prismaã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install prisma @prisma/client

# PrismaåˆæœŸåŒ–
npx prisma init

# ä¸Šè¨˜ã®schema.prismaã‚’ä½œæˆ

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ(DBãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ)
npx prisma migrate dev --name init

# Prisma Clientã‚’ç”Ÿæˆ
npx prisma generate
```

### 3. ç’°å¢ƒå¤‰æ•°è¨­å®š

`.env` ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã‚’è¿½åŠ :
```
DATABASE_URL="postgresql://username:password@host:port/database"
```

### 4. APIå®Ÿè£…

#### 4-1. ã‚²ãƒ¼ãƒ ä½œæˆãƒ»å–å¾—API

`app/api/games/route.ts`
```typescript
import { NextResponse } from 'next/server'
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

// ã‚²ãƒ¼ãƒ ä½œæˆ
export async function POST(request: Request) {
  try {
    const { title, description } = await request.json()
    
    const game = await prisma.game.create({
      data: {
        title,
        description: description || null,
      },
    })
    
    return NextResponse.json(game)
  } catch (error) {
    return NextResponse.json({ error: 'ã‚²ãƒ¼ãƒ ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })
  }
}

// ã‚²ãƒ¼ãƒ ä¸€è¦§å–å¾—
export async function GET() {
  try {
    const games = await prisma.game.findMany({
      include: {
        cards: true,
      },
      orderBy: {
        updatedAt: 'desc',
      },
    })
    
    return NextResponse.json(games)
  } catch (error) {
    return NextResponse.json({ error: 'ã‚²ãƒ¼ãƒ ä¸€è¦§ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })
  }
}
```

#### 4-2. ç‰¹å®šã‚²ãƒ¼ãƒ å–å¾—ãƒ»æ›´æ–°ãƒ»å‰Šé™¤API

`app/api/games/[id]/route.ts`
```typescript
import { NextResponse } from 'next/server'
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

// ç‰¹å®šã‚²ãƒ¼ãƒ å–å¾—
export async function GET(
  request: Request,
  { params }: { params: { id: string } }
) {
  try {
    const game = await prisma.game.findUnique({
      where: { id: params.id },
      include: {
        cards: {
          orderBy: { order: 'asc' },
        },
      },
    })
    
    if (!game) {
      return NextResponse.json({ error: 'ã‚²ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“' }, { status: 404 })
    }
    
    return NextResponse.json(game)
  } catch (error) {
    return NextResponse.json({ error: 'ã‚²ãƒ¼ãƒ ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })
  }
}

// ã‚²ãƒ¼ãƒ æ›´æ–°
export async function PUT(
  request: Request,
  { params }: { params: { id: string } }
) {
  try {
    const { title, description } = await request.json()
    
    const game = await prisma.game.update({
      where: { id: params.id },
      data: {
        title,
        description,
      },
    })
    
    return NextResponse.json(game)
  } catch (error) {
    return NextResponse.json({ error: 'ã‚²ãƒ¼ãƒ ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })
  }
}

// ã‚²ãƒ¼ãƒ å‰Šé™¤(ã‚«ãƒ¼ãƒ‰ã‚‚è‡ªå‹•å‰Šé™¤: CASCADE)
export async function DELETE(
  request: Request,
  { params }: { params: { id: string } }
) {
  try {
    await prisma.game.delete({
      where: { id: params.id },
    })
    
    return NextResponse.json({ success: true })
  } catch (error) {
    return NextResponse.json({ error: 'ã‚²ãƒ¼ãƒ ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })
  }
}
```

#### 4-3. ã‚«ãƒ¼ãƒ‰ä½œæˆãƒ»å–å¾—API

`app/api/cards/route.ts`
```typescript
import { NextResponse } from 'next/server'
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

// ã‚«ãƒ¼ãƒ‰ä½œæˆ
export async function POST(request: Request) {
  try {
    const { gameId, name, imageUrl, description, attributes, order } = await request.json()
    
    const card = await prisma.card.create({
      data: {
        gameId,
        name,
        imageUrl,
        description: description || null,
        attributes: attributes || null,
        order: order || 0,
      },
    })
    
    return NextResponse.json(card)
  } catch (error) {
    return NextResponse.json({ error: 'ã‚«ãƒ¼ãƒ‰ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })
  }
}

// ã‚«ãƒ¼ãƒ‰ä¸€è¦§å–å¾—(ã‚²ãƒ¼ãƒ IDã§ãƒ•ã‚£ãƒ«ã‚¿å¯èƒ½)
export async function GET(request: Request) {
  try {
    const { searchParams } = new URL(request.url)
    const gameId = searchParams.get('gameId')
    
    const cards = await prisma.card.findMany({
      where: gameId ? { gameId } : undefined,
      orderBy: {
        order: 'asc',
      },
    })
    
    return NextResponse.json(cards)
  } catch (error) {
    return NextResponse.json({ error: 'ã‚«ãƒ¼ãƒ‰ä¸€è¦§ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })
  }
}
```

#### 4-4. ç‰¹å®šã‚«ãƒ¼ãƒ‰æ›´æ–°ãƒ»å‰Šé™¤API

`app/api/cards/[id]/route.ts`
```typescript
import { NextResponse } from 'next/server'
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

// ã‚«ãƒ¼ãƒ‰æ›´æ–°
export async function PUT(
  request: Request,
  { params }: { params: { id: string } }
) {
  try {
    const { name, imageUrl, description, attributes, order } = await request.json()
    
    const card = await prisma.card.update({
      where: { id: params.id },
      data: {
        name,
        imageUrl,
        description,
        attributes,
        order,
      },
    })
    
    return NextResponse.json(card)
  } catch (error) {
    return NextResponse.json({ error: 'ã‚«ãƒ¼ãƒ‰ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })
  }
}

// ã‚«ãƒ¼ãƒ‰å‰Šé™¤
export async function DELETE(
  request: Request,
  { params }: { params: { id: string } }
) {
  try {
    await prisma.card.delete({
      where: { id: params.id },
    })
    
    return NextResponse.json({ success: true })
  } catch (error) {
    return NextResponse.json({ error: 'ã‚«ãƒ¼ãƒ‰ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })
  }
}
```

---

## UIã¨ã®é€£æº

### MY COLLECTION ã®å®Ÿè£…

ãƒˆãƒƒãƒ—ç”»é¢ã®MY COLLECTIONã§ã€DBã‹ã‚‰å–å¾—ã—ãŸã‚²ãƒ¼ãƒ ä¸€è¦§ã‚’è¡¨ç¤º:
```typescript
'use client'

import { useEffect, useState } from 'react'
import { useRouter } from 'next/navigation'

interface Game {
  id: string
  title: string
  description: string | null
  cards: any[]
  updatedAt: string
}

export function MyCollection() {
  const [games, setGames] = useState<Game[]>([])
  const [loading, setLoading] = useState(true)
  const router = useRouter()
  
  useEffect(() => {
    fetchGames()
  }, [])
  
  const fetchGames = async () => {
    try {
      const response = await fetch('/api/games')
      const data = await response.json()
      setGames(data)
    } catch (error) {
      console.error('ã‚²ãƒ¼ãƒ ä¸€è¦§ã®å–å¾—ã«å¤±æ•—:', error)
    } finally {
      setLoading(false)
    }
  }
  
  const editGame = (gameId: string) => {
    router.push(`/deckbuilding?gameId=${gameId}`)
  }
  
  const deleteGame = async (gameId: string) => {
    if (!confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹?')) return
    
    try {
      await fetch(`/api/games/${gameId}`, { method: 'DELETE' })
      fetchGames() // å†å–å¾—
    } catch (error) {
      console.error('ã‚²ãƒ¼ãƒ ã®å‰Šé™¤ã«å¤±æ•—:', error)
    }
  }
  
  if (loading) return <div>èª­ã¿è¾¼ã¿ä¸­...</div>
  if (games.length === 0) return <div>ã¾ã ã‚²ãƒ¼ãƒ ãŒã‚ã‚Šã¾ã›ã‚“</div>
  
  return (
    <div className="space-y-4">
      <h2 className="text-2xl font-bold">MY COLLECTION</h2>
      <p className="text-gray-600">ä¿å­˜æ¸ˆã¿ã®ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ã‚’ç·¨é›†ã§ãã¾ã™</p>
      
      <div className="grid gap-4">
        {games.map(game => (
          <div key={game.id} className="border rounded-lg p-4 hover:shadow-lg transition">
            <h3 className="text-xl font-semibold">{game.title}</h3>
            {game.description && (
              <p className="text-gray-600 mt-2">{game.description}</p>
            )}
            <div className="flex justify-between items-center mt-4">
              <span className="text-sm text-gray-500">
                ã‚«ãƒ¼ãƒ‰æ•°: {game.cards.length}æš | 
                æœ€çµ‚æ›´æ–°: {new Date(game.updatedAt).toLocaleDateString('ja-JP')}
              </span>
              <div className="space-x-2">
                <button
                  onClick={() => editGame(game.id)}
                  className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                >
                  ç¶šãã‚’ç·¨é›†
                </button>
                <button
                  onClick={() => deleteGame(game.id)}
                  className="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"
                >
                  å‰Šé™¤
                </button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  )
}
```

### å‰µä½œç”»é¢ã§ã®ãƒ‡ãƒ¼ã‚¿ä¿å­˜
```typescript
// æ–°è¦ã‚²ãƒ¼ãƒ ä½œæˆ
const createNewGame = async () => {
  const response = await fetch('/api/games', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      title: 'æ–°ã—ã„ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ',
      description: '',
    }),
  })
  const game = await response.json()
  return game.id
}

// ã‚«ãƒ¼ãƒ‰ä¿å­˜
const saveCard = async (cardData: any) => {
  const response = await fetch('/api/cards', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      gameId: currentGameId,
      name: cardData.name,
      imageUrl: cardData.imageUrl || '',
      description: cardData.description,
      attributes: cardData.attributes,
    }),
  })
  return response.json()
}
```

---

## å®Œæˆã‚¤ãƒ¡ãƒ¼ã‚¸

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œå‰µä½œã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. æ–°è¦ã‚²ãƒ¼ãƒ ãŒDBã«ä½œæˆã•ã‚Œã‚‹(Game ãƒ†ãƒ¼ãƒ–ãƒ«)
3. ã‚«ãƒ¼ãƒ‰ã‚’ä½œæˆ â†’ DBã«ä¿å­˜(Card ãƒ†ãƒ¼ãƒ–ãƒ«)
4. ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹ â†’ MY COLLECTIONã«ã‚²ãƒ¼ãƒ ãŒè¡¨ç¤º
5. ã€Œç¶šãã‚’ç·¨é›†ã€ã‚¯ãƒªãƒƒã‚¯ â†’ DBã‹ã‚‰ã‚²ãƒ¼ãƒ +ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
6. ã‚«ãƒ¼ãƒ‰ã‚’è¿½åŠ ãƒ»ç·¨é›† â†’ DBã«ä¿å­˜
7. ã‚²ãƒ¼ãƒ å‰Šé™¤ â†’ CASCADEã§ã‚«ãƒ¼ãƒ‰ã‚‚è‡ªå‹•å‰Šé™¤

---

## å®Ÿè£…å„ªå…ˆé †ä½

1. **Prismaã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—** (30åˆ†)
   - schema.prismaä½œæˆ
   - migrateå®Ÿè¡Œ
   - Prisma Clientç”Ÿæˆ

2. **ã‚²ãƒ¼ãƒ APIå®Ÿè£…** (30åˆ†)
   - POST /api/games
   - GET /api/games
   - GET /api/games/[id]

3. **ã‚«ãƒ¼ãƒ‰APIå®Ÿè£…** (30åˆ†)
   - POST /api/cards
   - GET /api/cards?gameId=xxx

4. **MY COLLECTIONé€£æº** (30åˆ†)
   - ã‚²ãƒ¼ãƒ ä¸€è¦§è¡¨ç¤º
   - ç¶šãã‚’ç·¨é›†æ©Ÿèƒ½
   - å‰Šé™¤æ©Ÿèƒ½

**åˆè¨ˆ: 2æ™‚é–“**

ã“ã®DBå®Ÿè£…ã‚’å®Œäº†ã•ã›ã¦ãã ã•ã„ã€‚